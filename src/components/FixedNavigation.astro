---
import FixedNavItem from "../components/FixedNavItem.astro";
import { Image } from "astro:assets";
import IssaminuLogo from "../assets/Issaminu Logo LIGHT.png";
---

<script defer>
  document.addEventListener(
    "DOMContentLoaded",
    function () {
      const fixedNavbar = document.getElementById("fixed-navbar");
      if (!fixedNavbar) return;

      const navbar = document.getElementById("navbar");
      let navbarPosition = 0;

      if (!navbar) {
        if (window.location.href == "/") {
          return;
        } else {
          fixedNavbar.style.display = "flex";
        }
      } else {
        navbarPosition = navbar.offsetTop + navbar.offsetHeight;

        window.addEventListener("scroll", function () {
          console.log(window.scrollY, navbarPosition);
          if (window.scrollY > navbarPosition) {
            fixedNavbar.style.display = "flex";
          } else {
            fixedNavbar.style.display = "none";
          }
        });
      }
    },
    { once: true }
  );
</script>

<div
  class="pointer-events-none fixed z-30 grid w-full grid-cols-[1fr,min(640px,100%),1fr] px-5 sm:px-4"
>
  <div
    id="fixed-navbar"
    class="pointer-events-auto justify-between col-start-2 mt-4 rounded-2xl bg-gray-800/95 px-4 py-2.5 backdrop-blur will-change-transform [@supports(backdrop-filter:blur(0px))]:bg-white/[3%]"
    style="display: none;"
  >
    <a href="/" target="_self" class="flex flex-row">
      <Image
        src={IssaminuLogo}
        alt="Issaminu's logo"
        class="rounded-full w-10 h-10 sm:w-8 sm:h-8"
        format="avif"
      />
    </a>
    <div class="flex flex-row gap-8">
      <!-- <FixedNavItem name="Blog" icon="newspaper" href="/blog" /> -->
      <!-- <NavItem name="Projects" icon="code" href="/projects" /> -->
      <FixedNavItem
        name="Twitter"
        icon="twitter"
        href="https://twitter.com/Issaminuu"
      />
      <FixedNavItem
        name="GitHub"
        icon="github"
        href="https://github.com/Issaminu"
      />
      <FixedNavItem
        name="LinkedIn"
        icon="linkedin"
        href="https://www.linkedin.com/in/issam-boubcher"
      />
    </div>
  </div>
</div>
